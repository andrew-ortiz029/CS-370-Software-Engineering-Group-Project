<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Links -->

    <!-- Original filepath structure to .css templates-->
    <!---->
    <link rel="stylesheet" href="/styles/universal.css">
    <link rel="stylesheet" href="/styles/passwordReset.css"/>
    
    <!-- <link rel="stylesheet" href="/Login/styles/universal.css" />
    <link rel="stylesheet" href="/Login/styles/forgotPassword.css" /> -->

    <!-- Title -->
    <title>Reset Password</title>
  </head>

  <!-- Login Start -->
  <div class="login-w">
    <div class="login-card">
      
      <!-- Login Left Start -->
      <div class="login-l">
        <div class="login-title">
          <h1>Channel 4 News</h1>
        </div>

        <div class="logo-w">
          <!-- Updated image file path-->
          <img src="/imgs/JavaLogo-fix.png" alt="logo">
        </div>
      </div>

      <!-- Login Right Start -->
      <div class="login-r">
        <form class="login-form" action="/passwordReset" method="post">

          <div class="forgotPassword-title">
            <h1>Reset Password</h1>
          </div>

          <div class="username-w input-w">
            <input type="text" name="email" required />
            <i>Email</i>
          </div>

          <div class="username-w input-w">
            <input type="text" name="code" required />
            <i>Code</i>
          </div>

          <div class="username-w input-w">
            <input type="password" name="newPassword" required />
            <i>New Password</i>
          </div>

          <div class="username-w input-w">
            <input type="password" name="confirmPassword" required />
            <i>Re-Enter New Password</i>
          </div>

          <div class="forgot-Link">
            <h4><a href = "/">Back to Login!</a></h4>
          </div>
          
          <div>
            <form class="loginBtn-w" action="">
              <button class="login-btn" type = "submit">Submit</button>
            </form>
          </div>
        </form>
        <h5 class="signUp-w"><a href = "/signup">Dont have an account? Sign-Up!</a></h5>
      </div>
    </div>
  </div>
  <!-- Login Finish -->

  <body>
    <div id="myModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <p id="modalMessage">Placeholder message</p>
      </div>
    </div>
    <!-- Hidden div to pass loginError from server-side to client-side -->
    <div id="resetError" style="display: none;" th:text="${resetError}"></div>
  </body>
  
</html>

<!--CSS styling for modal-->
<style>
.modal {
  display: none;
  /* Hidden by default */
  position: fixed;
  /* Stay in place */
  z-index: 1;
  /* Sit on top */
  padding-top: 100px;
  /* Location of the box */
  left: 0;
  top: 0;
  width: 100%;
  /* Full width */
  height: 100%;
  /* Full height */
  overflow: auto;
  /* Enable scroll if needed */
  background-color: rgb(0, 0, 0);
  /* Fallback color */
  background-color: rgba(0, 0, 0, 0.4);
  /* Black w/ opacity */
}

.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
}

.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}
</style>

<!--Javascript logic to show and close modal-->
<script>
// Get the modal
var modal = document.getElementById("myModal");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function () {
  modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function (event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}

// Function to open the modal
function openModal() {
  var modal = document.getElementById("myModal");
  modal.style.display = "block";
}

function setModalMessage(message) {
  var p = document.getElementById('modalMessage');
  p.textContent = message;
}

// Check for loginError attribute and open modal if present
var resetError = document.getElementById('resetError').textContent;
if (resetError) {
  setModalMessage(resetError);
  openModal();
}
</script>